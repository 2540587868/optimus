// Code generated by optimus. DO NOT EDIT.
package testdata

import (
	"time"
)

type SimpleConfigOption func(*SimpleConfig)

// NewSimpleConfig creates a new SimpleConfig with defaults and applies options.
func NewSimpleConfig(opts ...SimpleConfigOption) (*SimpleConfig, error) {
	c := &SimpleConfig{
		Host:    "0.0.0.0",
		Port:    8080,
		Timeout: 10 * time.Second,
	}
	c.Apply(opts...)

	if v, ok := interface{}(c).(interface{ Validate() error }); ok {
		if err := v.Validate(); err != nil {
			return nil, err
		}
	}

	return c, nil
}

// Apply applies options to the config
func (c *SimpleConfig) Apply(opts ...SimpleConfigOption) {
	for _, opt := range opts {
		opt(c)
	}
}

// Host 监听地址
// WithHost sets the Host field.
func WithHost(v string) SimpleConfigOption {
	return func(c *SimpleConfig) {
		c.Host = v
	}
}

// Port 监听端口
// WithPort sets the Port field.
func WithPort(v int) SimpleConfigOption {
	return func(c *SimpleConfig) {
		c.Port = v
	}
}

// Timeout 请求超时
// WithTimeout sets the Timeout field.
func WithTimeout(v time.Duration) SimpleConfigOption {
	return func(c *SimpleConfig) {
		c.Timeout = v
	}
}

// DBList 数据库列表 (测试切片)
// AddDBList appends values to DBList slice.
func AddDBList(v ...string) SimpleConfigOption {
	return func(c *SimpleConfig) {
		c.DBList = append(c.DBList, v...)
	}
}

// MaxConn 最大连接数 (测试指针优化)
// nil 表示不限制
// WithMaxConn sets the MaxConn field.
// Note: Parameter is value type, assigned as pointer internally.
func WithMaxConn(v int) SimpleConfigOption {
	return func(c *SimpleConfig) {
		c.MaxConn = &v
	}
}

// Tags 元数据 (测试 Map 支持)
// AddTags adds a key-value pair to Tags.
func AddTags(k string, v string) SimpleConfigOption {
	return func(c *SimpleConfig) {
		if c.Tags == nil {
			c.Tags = make(map[string]string)
		}
		c.Tags[k] = v
	}
}

// UseTLS 是否开启TLS (测试改名)
// WithSecure sets the UseTLS field.
func WithSecure(v bool) SimpleConfigOption {
	return func(c *SimpleConfig) {
		c.UseTLS = v
	}
}
